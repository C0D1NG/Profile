!function(e){function n(t){var n=e(window).scrollTop();var r=n+e(window).height()/4;var i=e(t).offset().top;var s=i+e(t).height();return s<=r&&i>=n}var t={firstLevel:"> h2",secondLevel:false,innerWrapper:".jumpto-block",offset:400,animate:1e3,navContainer:false,anchorTopPadding:20,showTitle:"Jump To",closeButton:true};e.fn.jumpto=function(r){var i=e.extend({},t,r),s=e(this),o="",u=e(i.innerWrapper),a="",f="",l="";s.addClass("jumpto-cotainer");redrawMenu=function(){e(a.slice(0,-2)).each(function(t){if(n(e(this))){e(".jumpto-subnav a").removeClass("active").parent().find(" a[href='#"+e(this).attr("id")+"']").addClass("active");if(e("a[href='#"+e(this).attr("id")+"']").parent().parent().hasClass("jumpto-second")){e("a[href='#"+e(this).attr("id")+"']").closest(".jumpto-second").show()}if(e("a[href='#"+e(this).attr("id")+"']").parent().parent().hasClass("jumpto-first")){e("a[href='#"+e(this).attr("id")+"']").closest(".jumpto-first").find(".jumpto-second").hide()}if(e("a[href='#"+e(this).attr("id")+"']").parent().find(".jumpto-second")){e("a[href='#"+e(this).attr("id")+"']").parent().find(".jumpto-second").show()}}});if(e(document).scrollTop()>i.offset){e(".jumpto-subnav").removeClass("bottom").addClass("fixed")}else{e(".jumpto-subnav").removeClass("bottom fixed")}if(e(document).scrollTop()>s.outerHeight(true)){e(".jumpto-subnav").addClass("bottom fixed")}};u.find(i.firstLevel).each(function(t){var n=e(this),r=t,s="";if(n.parent().find(i.secondLevel).length>0){s+="<ul class='jumpto-second'>";n.parent().find(i.secondLevel).each(function(t){var n="jumpto_"+r+"_"+t;e(this).attr("id",n);link_to="<a href='#"+n+"'>"+e(this).text()+"</a>";s+="<li>"+link_to+"</li>";a+="#"+n+", "});s+="</ul>";var u="jumpto_"+r;n.attr("id",u);link_to="<a href='#"+u+"'>"+n.text()+"</a>";a+="#"+u+", ";o+="<li>"+link_to+s+"</li>"}else{var u="jumpto_"+r;link_to="<a href='#"+u+"'>"+n.text()+"</a>";n.attr("id",u);a+="#"+u+", ";o+="<li>"+link_to+"</li>"}});if(i.showTitle!=false){var f="<div class='jumpto-title'>"+i.showTitle+"</div>"}if(i.closeButton!=false){var l="<div class='jumpto-close'><a href='#' id='jumpto-close'>Close</a></div>"}if(i.navContainer==false){e(this).append("<nav class='jumpto-subnav'>"+f+"<ul class='jumpto-first'>"+o+"</ul>"+l+"</nav>")}else{e(i.navContainer).addClass("jumpto-subnav").html(f+"<ul class='jumpto-first'>"+o+"</ul>"+l)}e(".jumpto-subnav a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var t=e(this.hash);t=t.length?t:e("[name="+this.hash.slice(1)+"]");if(t.length){e("html,body").animate({scrollTop:t.offset().top-i.anchorTopPadding},i.animate,"swing");return false}}});e(window).scroll(function(){redrawMenu()});e(".jumpto-subnav #jumpto-close").click(function(){var t=e(this);t.parent().parent().find("> .jumpto-first").slideToggle("slow",function(){if(e(this).is(":visible")){t.html("Close")}else{t.html("Open")}});return false});setInterval(function(){var t=[];e(a.slice(0,-2)).each(function(r){t.push(n(e(this)))});if(e.inArray(true,t)==-1){e(".jumpto-subnav a").removeClass("active");e(".jumpto-subnav .jumpto-second").hide()}},500)}}(window.jQuery)